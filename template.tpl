___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Stylight Sales Identifier",
  "brand": {
    "id": "Stylight",
    "displayName": "Stylight",
    "categories": [
      "ANALYTICS",
      "SALES"
    ],
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Essential for Stylight Sales Tracking. Template ensures identification of the traffic coming from Stylight. Stylight Sales Tracking also requires installation of \u0027Stylight Sales Confirmation\u0027 to work.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
const templateStorage = require('templateStorage');

const url = 'https://cdn.sales.partner.stylight.net/v1/st.min.js';

if(templateStorage.getItem('loaded') === true) {
  data.gtmOnSuccess();
}
else {
  injectScript(url, () => {
    templateStorage.setItem('loaded', true);
    data.gtmOnSuccess();
  }, () => {
    templateStorage.setItem('loaded', false);
    data.gtmOnFailure();
  });  
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "stylightSales"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.sales.partner.stylight.net/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_template_storage",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 10/15/2021, 12:52:03 PM


